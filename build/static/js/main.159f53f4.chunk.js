(this.webpackJsonpfastmessanger=this.webpackJsonpfastmessanger||[]).push([[0],{81:function(e,a,t){},82:function(e,a,t){},83:function(e,a,t){},92:function(e,a,t){},94:function(e,a,t){"use strict";t.r(a);var n=t(7),r=t(2),s=t.n(r),c=t(13),o=t.n(c),i=(t(81),t(36)),l=(t(82),t(83),s.a.forwardRef((function(e,a){var t=e.username;return Object(n.jsx)("div",{ref:a,className:"Header",children:Object(n.jsxs)("h2",{className:"welcome-text",children:[" Welcome ",t||"Anonymous"]})})}))),d=t(125),m=t(128),u=t(130),j=t(131),p=t(139),f=t(129),b=t(64),h=t.n(b),x=t(42),v=(t(56),x.a.initializeApp({apiKey:"AIzaSyCvZgIQfxZ71UTpTi2fSqBBWAY5q6J_Bp4",authDomain:"fastmessanger-bodyan359.firebaseapp.com",projectId:"fastmessanger-bodyan359",storageBucket:"fastmessanger-bodyan359.appspot.com",messagingSenderId:"436591331981",appId:"1:436591331981:web:7d5d427ee13863423770c4"}).firestore()),g=s.a.forwardRef((function(e,a){var t=e.roomNames,r=e.username,s=e.setRoomID,c=240,o=Object(d.a)((function(e){return{root:{display:"flex"},appBar:{width:"calc(100% - ".concat(c,"px)"),marginLeft:c},drawer:{width:c,flexShrink:0},drawerPaper:{width:c},toolbar:e.mixins.toolbar,content:{flexGrow:1,backgroundColor:e.palette.background.default,padding:e.spacing(3)}}})),i=o();return Object(n.jsxs)(p.a,{ref:a,className:i.drawer,variant:"permanent",classes:{paper:i.drawerPaper},anchor:"left",children:[Object(n.jsx)("div",{className:i.toolbar}),Object(n.jsx)(m.a,{}),Object(n.jsxs)(f.a,{children:[Object(n.jsxs)(u.a,{button:!0,onClick:function(e){var a=prompt("Please enter room name:","PJATK Students");v.collection("rooms").add({id:r,name:a})},children:[Object(n.jsx)(j.a,{primary:"Create new room"}),Object(n.jsx)(h.a,{})]}),Object(n.jsx)(m.a,{}),t.map((function(e){var a=e.id,t=e.name;return Object(n.jsx)(u.a,{button:!0,onClick:function(){s(a)},children:Object(n.jsx)(j.a,{primary:t.name})},a)}))]}),Object(n.jsx)(m.a,{})]})}));var O=t(132),w=t(133),y=t(48),N=(t(92),s.a.forwardRef((function(e,a){var t=e.username,r=e.message,s=t===r.username;return Object(n.jsx)("div",{ref:a,className:r.timestamp+" message ".concat(s?"message__user":""),children:Object(n.jsx)(O.a,{className:s?"message__userCard":"message__guestCard",children:Object(n.jsx)(w.a,{children:Object(n.jsxs)(y.a,{color:"textPrimary",variant:"h5",component:"h2",children:[!s&&"".concat(r.username||"Anonymous",": ")," ",r.data]})})})})}))),C=t(137),S=t(140),_=t(141),k=t(138),B=t(66),I=t(67),P=t.n(I),T=t(134),D=t(135),E=t(136),F=t(52),L=t.n(F),A=t(65),R=function(){var e=Object(A.a)(L.a.mark((function e(a){var t,n;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="http://api.weatherapi.com/v1/current.json?key=98d10412378d474f8a2200129211808%20&q=".concat(a,"&aqi=no"),e.next=3,fetch(t);case 3:return e.next=5,e.sent.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();var W=function(){var e=s.a.useState(""),a=Object(i.a)(e,2),t=a[0],r=a[1],c=s.a.useState([]),o=Object(i.a)(c,2),m=o[0],u=o[1],j=s.a.useState(""),p=Object(i.a)(j,2),f=p[0],b=p[1],h=s.a.useState([]),O=Object(i.a)(h,2),w=O[0],I=O[1],F=s.a.useState("PjBDnTCDD1IlMLgQsXh6"),L=Object(i.a)(F,2),A=L[0],W=L[1];s.a.useEffect((function(){v.collection("rooms").doc(A).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){u(e.docs.map((function(e){return{id:e.id,message:e.data()}})))}))}),[A]),s.a.useEffect((function(){v.collection("rooms").onSnapshot((function(e){I(e.docs.map((function(e){return{id:e.id,name:e.data()}})))}))}),[]);var q=240,J=Object(d.a)((function(e){return{root:{display:"flex"},appBar:{width:"calc(100% - ".concat(q,"px)"),marginLeft:q},drawer:{width:q,flexShrink:0},drawerPaper:{width:q},toolbar:e.mixins.toolbar,content:{flexGrow:1,backgroundColor:e.palette.background.default,padding:e.spacing(3)}}}))();return s.a.useEffect((function(){b(prompt("Enter your nickname"))}),[]),Object(n.jsxs)("div",{className:J.root,children:[Object(n.jsx)(T.a,{}),Object(n.jsx)(D.a,{position:"fixed",className:J.appBar,children:Object(n.jsxs)(E.a,{className:"Header",children:[Object(n.jsx)(y.a,{variant:"h6",noWrap:!0,children:"FastMessenger"}),Object(n.jsx)(l,{username:f})]})}),Object(n.jsx)("div",{className:"Menu",children:Object(n.jsx)(g,{roomNames:w,username:f,setRoomID:W})}),Object(n.jsxs)("main",{className:J.content,children:[Object(n.jsx)("div",{className:J.toolbar}),Object(n.jsx)(B.a,{className:"messageStyle",children:m.map((function(e){var a=e.id,t=e.message;return Object(n.jsx)(N,{className:a,username:f,message:t},a)}))}),Object(n.jsx)("form",{className:"app__form container",children:Object(n.jsxs)(C.a,{className:"app__formControl",children:[Object(n.jsx)(S.a,{children:"Enter a message..."}),Object(n.jsx)(_.a,{className:"app__input",placeholder:"Enter a message",value:t,onChange:function(e){return r(e.target.value)}}),Object(n.jsx)(k.a,{className:"app__iconButton",variant:"contained",color:"primary",disabled:!t,type:"submit",onClick:function(e){e.preventDefault(),v.collection("rooms").doc(A).collection("messages").add({data:t,username:f,timestamp:x.a.firestore.FieldValue.serverTimestamp()});var a=t.split(" ",2);"weather"===a[0].toLowerCase()&&R(a[1]).then((function(e){var a,t,n,r,s;console.log(e),void 0!==e&&setTimeout(v.collection("rooms").doc(A).collection("messages").add({data:"Weather in ".concat(null===e||void 0===e||null===(a=e.location)||void 0===a?void 0:a.name," is ").concat(null===e||void 0===e||null===(t=e.current)||void 0===t?void 0:t.temp_c,"\xb0.Local time: ").concat(null===e||void 0===e||null===(n=e.location)||void 0===n?void 0:n.localtime,". Condition: ").concat(null===e||void 0===e||null===(r=e.current)||void 0===r||null===(s=r.condition)||void 0===s?void 0:s.text,"."),username:"Weather Bot",timestamp:x.a.firestore.FieldValue.serverTimestamp()}),2220)})),r("")},children:Object(n.jsx)(P.a,{})})]})})]})]})},q=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,143)).then((function(a){var t=a.getCLS,n=a.getFID,r=a.getFCP,s=a.getLCP,c=a.getTTFB;t(e),n(e),r(e),s(e),c(e)}))};o.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(W,{})}),document.getElementById("root")),q()}},[[94,1,2]]]);
//# sourceMappingURL=main.159f53f4.chunk.js.map